<!-- Modal (User edit dialog) -->
<div class="modal-header">
  <h4 class="modal-title">Record Edit</h4>
</div>

<form novalidate role="form" name="recordEdit">
 <fieldset ng-disabled="!userDataAcquired">
  <div class="modal-body">
<!-- Show-errors required to make group show errors -->
    <div class="form-group" show-errors>
      <label>Name:</label>
<!-- Validations via Angular directives -->
      <input name="name" type="text" class="form-control" placeholder="User Name" 
      ng-model="user.name" ng-required="true" ng-pattern="/([A-Z])\w+/">
<!-- Block with error message -->
      <p class="help-block" ng-if="recordEdit.name.$error.required">Name is required</p> 
<!-- Pattern isn't perfect, name have to have a word with capital letter 'Jackob jr.' fitts here -->
      <p class="help-block" ng-if="recordEdit.name.$error.pattern">Enter valid name please</p> 
    </div>
    <div class="form-group" show-errors>
      <label>Email:</label>
      <input name="email" type="email" class="form-control" placeholder="User Email" 
      ng-model="user.email" ng-required="true">
      <p class="help-block" ng-if="recordEdit.email.$error.required">Email is required</p> 
      <p class="help-block" ng-if="recordEdit.email.$error.email">Enter valid email</p> 
    </div>    
    
    <div class="form-group">
      <label>City:</label>
<!-- Using UI Select module -->
<!-- UI Select requires selected item to be a property -->
      <ui-select name="city" ng-model="user.address.city" theme="bootstrap">
<!-- Element that shows selection -->
        <ui-select-match placeholder="City name">{{$select.selected}}</ui-select-match>
<!-- $search is var given by UI Select -->
<!-- Here we list choices with filter -->
        <ui-select-choices refresh="getCityNames($select.search)" refresh-delay="0"
                           repeat="city in cities">
          
<!-- This example filters 
        <ui-select-choices refresh="getCityNames($select.search)" refresh-delay="0"
                           repeat="city in cities | filter: $select.search track by $index">
-->
         <div ng-bind-html="city | highlight: $select.search"></div>
        </ui-select-choices>
      </ui-select>

    </div>
  </div>
    </fieldset>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" ng-click="modalSubmit()">
        Save
      </button>
      <button type="button" class="btn btn-default" ng-click="modalClose()">
        Close
      </button>
    </div>
</form>